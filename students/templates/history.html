{% extends "base.html" %}

{% block content %}

<div class="card shadow p-4">

    <h2 class="mb-4 text-center">Students Performance History</h2>

    {% if students %}

        <!-- ðŸ“Š Graph -->
        {% if graph %}
        <div class="text-center mb-4">
            <img src="data:image/png;base64,{{ graph }}" class="img-fluid">
        </div>
        {% endif %}

        <!-- ðŸ“‹ Table -->
        <table class="table table-bordered table-striped">
            <thead class="table-dark">
                <tr>
                    <th>Name</th>
                    <th>Attendance</th>
                    <th>Internal</th>
                    <th>Assignment</th>
                    <th>Final Exam</th>
                    <th>Prediction</th>
                </tr>
            </thead>
            <tbody>
                {% for student in students %}
                <tr>
                    <td>{{ student.name }}</td>
                    <td>{{ student.attendance }}</td>
                    <td>{{ student.internal_marks }}</td>
                    <td>{{ student.assignment_score }}</td>
                    <td>{{ student.final_exam_score }}</td>
                    <td>
                        {% if student.prediction_result == "High Chance of Success" %}
                            <span class="badge bg-success">
                                {{ student.prediction_result }}
                            </span>
                        {% else %}
                            <span class="badge bg-danger">
                                {{ student.prediction_result }}
                            </span>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

    {% else %}
        <p class="text-center">No student data available yet.</p>
    {% endif %}

</div>

{% endblock %}